# Go Ethereum Backend - ç®€åŒ–ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ä»¥å¤ªåŠåç«¯é¡¹ç›®ï¼Œä¸“æ³¨äºä¸¤ä¸ªæ ¸å¿ƒä»»åŠ¡ï¼š
- **ä»»åŠ¡1ï¼šåŒºå—é“¾è¯»å†™** - æŸ¥è¯¢åŒºå—å’Œå‘é€äº¤æ˜“
- **ä»»åŠ¡2ï¼šåˆçº¦ä»£ç ç”Ÿæˆ** - ä½¿ç”¨abigenç”ŸæˆGoç»‘å®šä»£ç 



## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- Node.js (ç”¨äºåˆçº¦ç¼–è¯‘)
- solc ç¼–è¯‘å™¨
- abigen å·¥å…·

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…Goä¾èµ–
go mod tidy

# å®‰è£…solcç¼–è¯‘å™¨
npm install -g solc

# å®‰è£…abigenå·¥å…·
go install github.com/ethereum/go-ethereum/cmd/abigen@latest
```

### é…ç½®Infura API Key

1. æ³¨å†ŒInfuraè´¦æˆ·: https://infura.io/register
2. åˆ›å»ºSepoliaæµ‹è¯•ç½‘ç»œé¡¹ç›®
3. è·å–API Key
4. æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„API Key

## ğŸ”§ ä»»åŠ¡1ï¼šåŒºå—é“¾è¯»å†™

### 1. æŸ¥è¯¢åŒºå—ä¿¡æ¯

è¿è¡ŒåŒºå—é“¾æŸ¥è¯¢ç¤ºä¾‹ï¼š

```bash
go run cmd/simple_query.go
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- è¿æ¥åˆ°Sepoliaæµ‹è¯•ç½‘ç»œ
- æŸ¥è¯¢æœ€æ–°åŒºå—ä¿¡æ¯
- æŸ¥è¯¢æŒ‡å®šåŒºå—ä¿¡æ¯
- æ˜¾ç¤ºç½‘ç»œçŠ¶æ€

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
=== åŒºå—é“¾æŸ¥è¯¢ç¤ºä¾‹ç¨‹åº ===
ä»»åŠ¡ç›®æ ‡: è¿æ¥åˆ°Sepoliaæµ‹è¯•ç½‘ç»œï¼ŒæŸ¥è¯¢åŒºå—ä¿¡æ¯

ğŸ”— æ­£åœ¨è¿æ¥åˆ°Sepoliaæµ‹è¯•ç½‘ç»œ...
âœ… æˆåŠŸè¿æ¥åˆ°Sepoliaæµ‹è¯•ç½‘ç»œ

ğŸ“¦ æŸ¥è¯¢æœ€æ–°åŒºå—ä¿¡æ¯...
ğŸ“Š æœ€æ–°åŒºå—å·: 5689432

ğŸ” æŸ¥è¯¢æœ€æ–°åŒºå—è¯¦ç»†ä¿¡æ¯...
ğŸ“‹ åŒºå—ä¿¡æ¯:
  åŒºå—å·: 5689432
  åŒºå—å“ˆå¸Œ: 0x1234...abcd
  æ—¶é—´æˆ³: 1700000000 (Unixæ—¶é—´æˆ³)
  äº¤æ˜“æ•°é‡: 145
  Gasä½¿ç”¨é‡: 15000000
```

### 2. å‘é€äº¤æ˜“

è¿è¡Œäº¤æ˜“å‘é€ç¤ºä¾‹ï¼š

```bash
go run cmd/simple_transaction.go
```

**ä½¿ç”¨å‰å‡†å¤‡ï¼š**
1. è·å–æµ‹è¯•ETHï¼šè®¿é—® https://sepoliafaucet.com/
2. é…ç½®æµ‹è¯•è´¦æˆ·ç§é’¥ï¼šç¼–è¾‘ `simple_transaction.go` æ–‡ä»¶

**åŠŸèƒ½è¯´æ˜ï¼š**
- æ£€æŸ¥è´¦æˆ·ä½™é¢
- æ„é€ ä»¥å¤ªå¸è½¬è´¦äº¤æ˜“
- ç­¾åå¹¶å‘é€äº¤æ˜“
- ç­‰å¾…äº¤æ˜“ç¡®è®¤

**å®‰å…¨æç¤ºï¼š**
- ä»…ä½¿ç”¨æµ‹è¯•ç½‘ç»œç§é’¥
- ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¡¬ç¼–ç ç§é’¥

## ğŸ”§ ä»»åŠ¡2ï¼šåˆçº¦ä»£ç ç”Ÿæˆ

### 1. ç¼–è¯‘æ™ºèƒ½åˆçº¦

è¿è¡Œç¼–è¯‘è„šæœ¬ï¼š

```bash
chmod +x scripts/compile_and_generate.sh
./scripts/compile_and_generate.sh
```

**è„šæœ¬åŠŸèƒ½ï¼š**
- æ£€æŸ¥solcå’Œabigenå·¥å…·
- ç¼–è¯‘SimpleCounter.solåˆçº¦
- ç”ŸæˆGoç»‘å®šä»£ç 

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
=== ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ç¼–è¯‘å’ŒGoç»‘å®šä»£ç ç”Ÿæˆ ===
ğŸ“¦ ç¼–è¯‘æ™ºèƒ½åˆçº¦...
âœ… ç¼–è¯‘æˆåŠŸ
ğŸ”§ ç”ŸæˆGoç»‘å®šä»£ç ...
âœ… Goç»‘å®šä»£ç ç”ŸæˆæˆåŠŸ
ğŸ“ ç”Ÿæˆçš„ç»‘å®šæ–‡ä»¶: pkg/eth/counter/counter.go
```

### 2. ä¸åˆçº¦äº¤äº’

è¿è¡Œåˆçº¦äº¤äº’ç¤ºä¾‹ï¼š

```bash
go run cmd/simple_contract.go
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- éƒ¨ç½²SimpleCounteråˆçº¦
- è°ƒç”¨åˆçº¦æ–¹æ³•ï¼ˆincrementï¼‰
- è¯»å–åˆçº¦çŠ¶æ€ï¼ˆgetCountï¼‰
- éªŒè¯åˆçº¦äº¤äº’ç»“æœ

**åˆçº¦æ–¹æ³•ï¼š**
- `increment()` - å¢åŠ è®¡æ•°å™¨ï¼ˆéœ€è¦Gasï¼‰
- `getCount()` - è·å–å½“å‰è®¡æ•°å€¼ï¼ˆåªè¯»ï¼‰

## ğŸ“ è¯¦ç»†ä»£ç è¯´æ˜

### åŒºå—é“¾æŸ¥è¯¢ (`simple_query.go`)

æ ¸å¿ƒä»£ç ç»“æ„ï¼š

```go
// 1. è¿æ¥åˆ°Sepoliaç½‘ç»œ
client, err := ethclient.Dial(rpcURL)

// 2. æŸ¥è¯¢æœ€æ–°åŒºå—
latestBlockNumber, err := client.BlockNumber(context.Background())

// 3. è·å–åŒºå—è¯¦ç»†ä¿¡æ¯
latestBlock, err := client.BlockByNumber(context.Background(), big.NewInt(int64(latestBlockNumber)))

// 4. æ˜¾ç¤ºåŒºå—ä¿¡æ¯
fmt.Printf("åŒºå—å·: %d\n", latestBlock.Number())
fmt.Printf("åŒºå—å“ˆå¸Œ: %s\n", latestBlock.Hash().Hex())
```

### äº¤æ˜“å‘é€ (`simple_transaction.go`)

æ ¸å¿ƒä»£ç ç»“æ„ï¼š

```go
// 1. å‡†å¤‡äº¤æ˜“å‚æ•°
nonce, err := client.PendingNonceAt(context.Background(), fromAddress)
gasPrice, err := client.SuggestGasPrice(context.Background())

// 2. åˆ›å»ºäº¤æ˜“å¯¹è±¡
tx := types.NewTransaction(nonce, toAddress, value, gasLimit, gasPrice, nil)

// 3. ç­¾åäº¤æ˜“
signedTx, err := types.SignTx(tx, types.NewLondonSigner(chainID), privateKey)

// 4. å‘é€äº¤æ˜“
err = client.SendTransaction(context.Background(), signedTx)
```

### åˆçº¦äº¤äº’ (`simple_contract.go`)

æ ¸å¿ƒä»£ç ç»“æ„ï¼š

```go
// 1. å‡†å¤‡äº¤æ˜“æˆæƒ
auth, err := bind.NewKeyedTransactorWithChainID(privateKey, chainID)

// 2. éƒ¨ç½²åˆçº¦
contractAddress, tx, contractInstance, err := counter.DeployCounter(auth, client)

// 3. è¯»å–åˆçº¦çŠ¶æ€ï¼ˆä¸éœ€è¦Gasï¼‰
currentCount, err := contractInstance.GetCount(nil)

// 4. è°ƒç”¨åˆçº¦æ–¹æ³•ï¼ˆéœ€è¦Gasï¼‰
incrementTx, err := contractInstance.Increment(auth)
```

## ğŸ” æŠ€æœ¯è¦ç‚¹

### 1. ç½‘ç»œè¿æ¥
- ä½¿ç”¨Infuraä½œä¸ºRPCèŠ‚ç‚¹æä¾›å•†
- æ”¯æŒSepoliaæµ‹è¯•ç½‘ç»œ
- è‡ªåŠ¨å¤„ç†ç½‘ç»œé‡è¿

### 2. äº¤æ˜“å¤„ç†
- è‡ªåŠ¨è·å–nonceå’ŒGasä»·æ ¼
- æ”¯æŒEIP-1559äº¤æ˜“ç­¾å
- åŒ…å«äº¤æ˜“ç¡®è®¤ç­‰å¾…æœºåˆ¶

### 3. åˆçº¦äº¤äº’
- è‡ªåŠ¨ç”ŸæˆGoç»‘å®šä»£ç 
- æ”¯æŒåˆçº¦éƒ¨ç½²å’Œè°ƒç”¨
- åŒ…å«äº‹ä»¶ç›‘å¬åŠŸèƒ½

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥Infura API Keyæ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸

2. **ä½™é¢ä¸è¶³**
   - ä»Sepoliaæ°´é¾™å¤´è·å–æµ‹è¯•ETH
   - æ£€æŸ¥è´¦æˆ·åœ°å€æ˜¯å¦æ­£ç¡®

3. **åˆçº¦ç¼–è¯‘å¤±è´¥**
   - ç¡®è®¤solcå·²æ­£ç¡®å®‰è£…
   - æ£€æŸ¥åˆçº¦è¯­æ³•æ˜¯å¦æ­£ç¡®

4. **ç»‘å®šä»£ç ç”Ÿæˆå¤±è´¥**
   - ç¡®è®¤abigenå·¥å…·å·²å®‰è£…
   - æ£€æŸ¥ABIæ–‡ä»¶æ˜¯å¦å­˜åœ¨

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
   ```go
   import "log"
   log.SetFlags(log.LstdFlags | log.Lshortfile)
   ```

2. **æ£€æŸ¥ç½‘ç»œçŠ¶æ€**
   ```go
   syncProgress, err := client.SyncProgress(context.Background())
   ```

3. **éªŒè¯äº¤æ˜“çŠ¶æ€**
   ```go
   receipt, err := client.TransactionReceipt(context.Background(), txHash)
   ```

## ğŸ“š å­¦ä¹ èµ„æº

- [Go Ethereumå®˜æ–¹æ–‡æ¡£](https://geth.ethereum.org/)
- [Solidityå®˜æ–¹æ–‡æ¡£](https://docs.soliditylang.org/)
- [Infura APIæ–‡æ¡£](https://infura.io/docs)
- [Sepoliaæµ‹è¯•ç½‘ç»œ](https://sepolia.dev/)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½å±•ç¤º

### ä»»åŠ¡1ï¼šåŒºå—é“¾è¯»å†™
- âœ… è¿æ¥åˆ°Sepoliaæµ‹è¯•ç½‘ç»œ
- âœ… æŸ¥è¯¢åŒºå—ä¿¡æ¯ï¼ˆå“ˆå¸Œã€æ—¶é—´æˆ³ã€äº¤æ˜“æ•°é‡ç­‰ï¼‰
- âœ… å‘é€ä»¥å¤ªå¸è½¬è´¦äº¤æ˜“
- âœ… äº¤æ˜“ç­¾åå’Œç¡®è®¤

### ä»»åŠ¡2ï¼šåˆçº¦ä»£ç ç”Ÿæˆ
- âœ… ç¼–å†™æç®€çš„è®¡æ•°å™¨æ™ºèƒ½åˆçº¦
- âœ… ä½¿ç”¨solcç¼–è¯‘åˆçº¦ç”ŸæˆABIå’Œå­—èŠ‚ç 
- âœ… ä½¿ç”¨abigenç”ŸæˆGoç»‘å®šä»£ç 
- âœ… éƒ¨ç½²åˆçº¦åˆ°Sepoliaç½‘ç»œ
- âœ… è°ƒç”¨åˆçº¦æ–¹æ³•ï¼ˆincrement/getCountï¼‰



## ğŸš€ å¿«é€ŸéªŒè¯

### 1. æµ‹è¯•ç½‘ç»œè¿æ¥
```bash
go run cmd/simple_query.go
```
*éªŒè¯åŒºå—é“¾æŸ¥è¯¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸*

### 2. æµ‹è¯•åˆçº¦ç¼–è¯‘
```bash
./scripts/compile_and_generate.sh
```
*éªŒè¯abigenç»‘å®šä»£ç ç”ŸæˆåŠŸèƒ½*

### 3. æŸ¥çœ‹ç”Ÿæˆçš„ç»‘å®šä»£ç 
```bash
ls -la pkg/eth/counter/
```
*ç¡®è®¤counter.goæ–‡ä»¶å·²ç”Ÿæˆ*

## ğŸ”§ æŠ€æœ¯æ ˆ

- **ç¼–ç¨‹è¯­è¨€**: Go 1.21+
- **ä»¥å¤ªåŠåº“**: go-ethereum v1.13.4
- **æ™ºèƒ½åˆçº¦**: Solidity 0.8.0
- **ç½‘ç»œ**: Sepoliaæµ‹è¯•ç½‘ç»œ
- **RPCèŠ‚ç‚¹**: Infura
- **å·¥å…·**: solc, abigen, Node.js

## ğŸ“ å­¦ä¹ è¦ç‚¹

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæ‚¨å¯ä»¥å­¦ä¹ åˆ°ï¼š

1. **åŒºå—é“¾åŸºç¡€**
   - åŒºå—ç»“æ„ç†è§£
   - äº¤æ˜“ç”Ÿå‘½å‘¨æœŸ
   - Gasæœºåˆ¶

2. **Goä»¥å¤ªåŠå¼€å‘**
   - ethclientä½¿ç”¨
   - äº¤æ˜“æ„é€ å’Œç­¾å
   - åˆçº¦äº¤äº’

3. **æ™ºèƒ½åˆçº¦å¼€å‘æµç¨‹**
   - åˆçº¦ç¼–å†™â†’ç¼–è¯‘â†’éƒ¨ç½²â†’è°ƒç”¨
   - ABIå’Œå­—èŠ‚ç ç†è§£
   - Goç»‘å®šä»£ç ç”Ÿæˆ

## ğŸ“Š é¡¹ç›®ç‰¹ç‚¹

### æç®€è®¾è®¡
- å»é™¤äº†æ‰€æœ‰éæ ¸å¿ƒåŠŸèƒ½
- ä¸“æ³¨äºä»»åŠ¡è¦æ±‚çš„æ ¸å¿ƒåŠŸèƒ½
- ä»£ç ç®€æ´æ˜“è¯»

### å®Œæ•´æ³¨é‡Š
- æ¯ä¸€è¡Œæ ¸å¿ƒä»£ç éƒ½æœ‰è¯¦ç»†æ³¨é‡Š
- ä¸­æ–‡æ³¨é‡Šä¾¿äºç†è§£
- æŠ€æœ¯è¦ç‚¹è¯´æ˜

### æ¸è¿›å¼å­¦ä¹ 
- ä»ç®€å•æŸ¥è¯¢å¼€å§‹
- é€æ­¥å¢åŠ äº¤æ˜“åŠŸèƒ½
- æœ€åå®Œæˆåˆçº¦äº¤äº’

## ğŸ” ä»£ç è´¨é‡

### ä»£ç è§„èŒƒ
- éµå¾ªGoè¯­è¨€æœ€ä½³å®è·µ
- é”™è¯¯å¤„ç†å®Œå–„
- èµ„æºç®¡ç†ä¸¥è°¨

### å®‰å…¨è€ƒè™‘
- ä»…ä½¿ç”¨æµ‹è¯•ç½‘ç»œ
- æ˜ç¡®çš„ç§é’¥å®‰å…¨è­¦å‘Š
- ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹

## ğŸ“š æ‰©å±•å»ºè®®

å®ŒæˆåŸºç¡€åŠŸèƒ½åï¼Œå¯ä»¥å°è¯•ï¼š

1. **åŠŸèƒ½å¢å¼º**
   - æ·»åŠ äº‹ä»¶ç›‘å¬
   - å®ç°æ‰¹é‡äº¤æ˜“
   - æ·»åŠ äº¤æ˜“ç›‘æ§

2. **æ¶æ„ä¼˜åŒ–**
   - å®ç°é…ç½®ç®¡ç†
   - æ·»åŠ æ—¥å¿—ç³»ç»Ÿ
   - æ„å»ºREST API

3. **å®‰å…¨åŠ å›º**
   - ç§é’¥åŠ å¯†å­˜å‚¨
   - äº¤æ˜“ç­¾åéªŒè¯
   - åˆçº¦å®‰å…¨æ£€æŸ¥

## ğŸ¤ æ”¯æŒä¸åé¦ˆ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹è¯¦ç»†çš„ `USAGE_GUIDE.md`
2. æ£€æŸ¥ä»£ç ä¸­çš„æ³¨é‡Šè¯´æ˜
3. éªŒè¯ç¯å¢ƒé…ç½®æ˜¯å¦æ­£ç¡®

## ğŸ“„ æ›´æ–°æ—¥å¿—

- **v1.0.0** (2025-11-14): åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - å®Œæˆä»»åŠ¡1ï¼šåŒºå—é“¾è¯»å†™
  - å®Œæˆä»»åŠ¡2ï¼šåˆçº¦ä»£ç ç”Ÿæˆ
  - æä¾›è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—

---

**æ³¨æ„ï¼š** è¿™æ˜¯ä¸€ä¸ªæ•™å­¦ç¤ºä¾‹é¡¹ç›®ï¼Œè¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚æ‰€æœ‰ç§é’¥å’Œæ•æ„Ÿä¿¡æ¯éƒ½åº”å¦¥å–„ä¿ç®¡ã€‚

**é¡¹ç›®çŠ¶æ€**: âœ… ä»»åŠ¡å®Œæˆ - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°å¹¶ç»è¿‡éªŒè¯